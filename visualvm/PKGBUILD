# Contributor: Kristof Jozsa <kjozsa@fsdev.hu>

pkgname=visualvm
pkgver=1.3.3
pkgrel=1
pkgdesc="A Java VM monitoring and troubleshooting tool"
arch=('i686' 'x86_64')
url="https://visualvm.dev.java.net/"
license=('GPL2')
depends=('java-environment')
options=(!strip)

source=(http://java.net/projects/visualvm/downloads/download/release133/visualvm_133.zip \
    visualvm)
md5sums=('8bb1bc8d3a312944c55d7f97a8f80238' '0187d33fcb833ac2a5349e9bbaa0c52c')

build() {
  cd $startdir/src
  mkdir $startdir/pkg/opt
  mv visualvm_133 $startdir/pkg/opt/visualvm

  rm -f $startdir/pkg/opt/visualvm/*.txt
  rm -f $startdir/pkg/opt/visualvm/bin/*.exe
  rm -f $startdir/pkg/opt/visualvm/platform/lib/nbexec.{dll,exe}
  rm -rf $startdir/pkg/opt/visualvm/profiler/lib/deployed/jdk1{5,6}/{hpux*,mac,solaris*,windows*}

  mkdir -p $startdir/pkg/usr/bin/
  install -m 755 $startdir/visualvm $startdir/pkg/usr/bin/
}
